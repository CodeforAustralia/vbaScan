webpackJsonp([1,2],Array(30).concat([function(t,e,n){n(134);var r=n(3)(n(83),n(152),null,null);t.exports=r.exports},,,,,,,,,,,,,,,,,,,,,function(t,e,n){"use strict";var r=n(12),o=n(155),i=n(76),s=n(75),c=n(77);r.default.use(o.a);var a={records:[],museumSpecies:[],ALASpecies:[],speciesData:{},selectedSpecie:null,token:null,position:null,listView:!0,filter:"species",progress:!1};e.a=new o.a.Store({state:a,actions:s,getters:i,mutations:c})},function(t,e){},function(t,e,n){n(129);var r=n(3)(n(78),n(147),null,null);t.exports=r.exports},,,,,,,,,,,,,,,,,,,function(t,e,n){"use strict";var r=n(16),o=n.n(r);n.d(e,"a",function(){return i});var i=function(t){return o.a.get("https://bie.ala.org.au/ws/search.json",{params:{q:t}}).then(function(t){return t.data.searchResults.results.find(function(e){return e.scientificName===t.config.params.q})}).catch(function(t){return console.log(t.message)})}},function(t,e,n){"use strict";var r=n(16),o=n.n(r);n.d(e,"a",function(){return i});var i=function(t){return o.a.get("https://collections.museumvictoria.com.au/api/search",{params:{query:t,recordtype:"species"}}).then(function(t){return t.data.find(function(e){return e.taxonomy.taxonName===t.config.params.query})}).catch(function(t){return console.log(t.message)})}},function(t,e,n){"use strict";var r=n(16),o=n.n(r);n.d(e,"a",function(){return i}),n.d(e,"b",function(){return s});var i=function(){return o.a.get("https://vbapi.herokuapp.com/auth/guest").then(function(t){return t.data.jwt}).catch(function(t){return console.log(t.message)})},s=function(t,e){return o.a.get("https://vbapi.herokuapp.com/search/point",{headers:{"x-access-token":e},params:t}).then(function(t){return t.data.records}).catch(function(t){return console.log(t.message)})}},function(t,e,n){"use strict";function r(t){return t.reduce(function(t,e){return 0===e.totalCountInt?t:(t.findIndex(function(t){return t.taxonId===e.taxonId})===-1&&t.push(e),t)},[])}Object.defineProperty(e,"__esModule",{value:!0});var o=n(89),i=n.n(o),s=n(18),c=n.n(s),a=n(74),u=n(73),l=n(72);n.d(e,"fetchToken",function(){return d}),n.d(e,"fetchRecordsByLocation",function(){return f}),n.d(e,"hydrateSpecies",function(){return m}),n.d(e,"getPosition",function(){return p}),n.d(e,"switchView",function(){return v}),n.d(e,"updateFilter",function(){return h}),n.d(e,"switchProgress",function(){return _}),n.d(e,"setSpecieDetail",function(){return g});var d=function(t){var e=t.commit;n.i(a.a)().then(function(t){console.log("response body : ",t),e("SET_TOKEN",t)})},f=function(t){var e=t.commit,o=t.state,i=o.token,s={lat:o.position.lat,long:o.position.long,rad:250};return n.i(a.b)(s,i).then(function(t){e("SET_RECORDS",t),r(t).forEach(function(t){n.i(u.a)(t.scientificDisplayNme).then(function(r){if(!r)return n.i(l.a)(t.scientificDisplayNme).then(function(n){e("ADD_ALA_SPECIES",c()({},n,{vbaTaxonId:t.taxonId})),e("ADD_SPECIE_DATA",{taxonId:t.taxonId,data:n})});var o=c()({},r,{vbaTaxonId:t.taxonId});return e("ADD_SPECIE_DATA",{taxonId:t.taxonId,data:r}),e("ADD_MUSEUM_SPECIES",o)})})})},m=function(t,e){var r=t.commit;n.i(u.a)(e).then(function(t){t&&r("ADD_MUSEUM_SPECIES",t)})},p=function(t){var e=t.commit,n={enableHighAccuracy:!0,timeout:1e4,maximumAge:0};return new i.a(function(t,e){"geolocation"in navigator||e(new Error("no geolocation feature present on device")),navigator.geolocation.getCurrentPosition(function(e){var n=e.coords.accuracy,r=e.coords.latitude,o=e.coords.longitude;console.log("Position aquired, accuracy : "+e.coords.accuracy),t({accu:n,lat:r,long:o})},function(t){e(new Error(t.message))},n)}).then(function(t){return e("SET_POSITION",t)}).catch(function(t){return console.log(t)})},v=function(t){(0,t.commit)("SWITCH_VIEW")},h=function(t,e){(0,t.commit)("UPDATE_FILTER",e)},_=function(t){(0,t.commit)("SWITCH_PROGRESS")},g=function(t,e){(0,t.commit)("UPDATE_SPECIE_DETAIL",e)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(91),o=n.n(r),i=n(18),s=n.n(i);n.d(e,"records",function(){return c}),n.d(e,"selectedSpecieData",function(){return a}),n.d(e,"specieMedia",function(){return u}),n.d(e,"token",function(){return l}),n.d(e,"species",function(){return d});var c=function(t){return t.records},a=function(t){var e=t.selectedSpecie;return!!e&&t.speciesData[e]},u=function(t){return function(e){console.log("getter media for: ",e);var n=t.speciesData[e];return console.log(n),n?n.media:null}},l=function(t){return t.token},d=function(t){return t.records.reduce(function(t,e){var n=s()({},{commonNme:e.commonNme,scientificDisplayNme:e.scientificDisplayNme,taxonId:e.taxonId,totalCountInt:Object.prototype.hasOwnProperty.call(e,"totalCountInt")?e.totalCountInt:null});if(0===n.totalCountInt)return t;var r=t.findIndex(function(t){return t.taxonId===n.taxonId});return r>-1?(n.totalCountInt+=t[r].totalCountInt,[].concat(o()(t.slice(0,r)),[n],o()(t.slice(r+1)))):[].concat(o()(t),[n])},[]).sort(function(t,e){var n=t.scientificDisplayNme.toLowerCase(),r=e.scientificDisplayNme.toLowerCase();return n<r?-1:n>r?1:0})}},function(t,e,n){"use strict";function r(t){return t||null}Object.defineProperty(e,"__esModule",{value:!0});var o=n(90),i=n.n(o),s=n(18),c=n.n(s),a=n(12);n.d(e,"SET_TOKEN",function(){return u}),n.d(e,"SET_RECORDS",function(){return l}),n.d(e,"SET_POSITION",function(){return d}),n.d(e,"SWITCH_VIEW",function(){return f}),n.d(e,"UPDATE_FILTER",function(){return m}),n.d(e,"SWITCH_PROGRESS",function(){return p}),n.d(e,"ADD_MUSEUM_SPECIES",function(){return v}),n.d(e,"ADD_ALA_SPECIES",function(){return h}),n.d(e,"ADD_SPECIE_DATA",function(){return _}),n.d(e,"UPDATE_SPECIE_DETAIL",function(){return g});var u=function(t,e){a.default.set(t,"token",e)},l=function(t,e){a.default.set(t,"records",e)},d=function(t,e){a.default.set(t,"position",e)},f=function(t){return a.default.set(t,"listView",!t.listView)},m=function(t,e){a.default.set(t,"filter",e)},p=function(t){a.default.set(t,"progress",!t.progress)},v=function(t,e){t.museumSpecies.push(e)},h=function(t,e){t.ALASpecies.push(e)},_=function(t,e){var n=e.taxonId,o=e.data;if(Object.prototype.hasOwnProperty.call(o,"taxonomy")){var s=["hazards","animalType","animalSubType","colours","maximumSize","habitats","media","diet","dietCategories","habitat","distribution","biology","generalDescription","briefId","licence","endemicity","commercial","conservationStatuses","authors","taxonomy","whenActive","whereToLook"].reduce(function(t,e){return c()({},t,i()({},e,o[e]))},{});return a.default.set(t.speciesData,n,s)}var u={media:[{large:{uri:o.largeImageUrl?o.largeImageUrl.replace(/http:\/\//,"https://"):null},medium:{uri:o.imageUrl?o.imageUrl.replace(/http:\/\//,"https://"):null},small:{uri:o.thumbnailUrl?o.thumbnailUrl.replace(/http:\/\//,"https://"):null},thumbnail:{uri:o.thumbnailUrl?o.thumbnailUrl.replace(/http:\/\//,"https://"):null}}],taxonomy:{family:r(o.family),kingdom:r(o.kingdom),commonName:r(o.commonName),taxonName:r(o.name)}};return a.default.set(t.speciesData,n,u)},g=function(t,e){a.default.set(t,"selectedSpecie",e)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(138),o=n.n(r);e.default={name:"app",components:{Hello:o.a},computed:{listView:function(){return this.$store.state.listView}},methods:{switchView:function(){this.$store.dispatch("switchView")}}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(143),o=n.n(r),i=n(144),s=n.n(i);e.default={name:"hello",components:{recordTable:o.a,specieDetail:s.a},computed:{currentComponent:function(){return this.$store.getters.selectedSpecieData?"specieDetail":this.$store.state.records.length?"recordTable":null},selectedSpecie:function(){return console.log("___",this.$store.getters.selectedSpecieData),this.$store.getters.selectedSpecieData},records:function(){return this.$store.getters.records.length},token:function(){return this.$store.state.token?"ready":"waiting..."},position:function(){return this.$store.state.position},species:function(){return this.$store.getters.species}},methods:{fetchToken:function(){this.$store.dispatch("fetchToken")},fetchRecords:function(){this.$store.dispatch("fetchRecordsByLocation")},getPosition:function(){this.$store.dispatch("getPosition")},browse:function(){var t=this;this.$store.dispatch("switchProgress"),this.$store.dispatch("getPosition").then(function(){return t.$store.dispatch("fetchRecordsByLocation")}).then(function(){return t.$store.dispatch("switchProgress")})}},beforeMount:function(){this.fetchToken()}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={props:["record"],methods:{},computed:{thumbnail:function(){var t=this.$store.getters.specieMedia(this.record.taxonId);return!!t&&(console.log(t),!!Object.prototype.hasOwnProperty.call(t[0],"small")&&t[0].small.uri)},backgroundImage:function(){var t=this.thumbnail;if(t){return{background:"url("+t+") center center no-repeat,linear-gradient(90deg, rgba(255,255,255,0) 0%, rgba(255,255,255,0.8) 20%, rgba(255,255,255,0.8) 80%, rgba(255,255,255,0) 100%),url("+t+") no-repeat",backgroundSize:"contain, contain, cover"}}return{background:"url(https://emojione.com/wp-content/uploads/assets/emojis/1f43e.svg)top center no-repeat"}}}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={data:function(){return{specie:this.$store.getters.selectedSpecieData,selectedImg:0}},computed:{media:function t(){var t=this.specie.media;return t?t:null},currentImage:function(){return console.log(this.selectedImg,this.media[this.selectedImg]),this.media[this.selectedImg].small.uri}},methods:{next:function(){this.selectedImg<this.media.length-1&&(this.selectedImg+=1)},previous:function(){console.log(this.media.length),this.selectedImg>0&&(this.selectedImg-=1)}}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(30),o=n.n(r);e.default={data:function(){return{filter:""}},components:{listItem:o.a},computed:{itemType:function(){switch(this.filter){case"species":return"↑ Species";case"distance":return"↑ Distance";case"count":return"↓ Count";default:return"↑ Records"}}},watch:{filter:function(t){console.log("filter changed to "+t),this.$store.dispatch("updateFilter",t)}}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={props:["record"],methods:{toggleRightSidenav:function(){var t=parseInt(event.currentTarget.id,10);this.$emit("infoPanel",t)}},computed:{thumbnail:function(){var t=this.$store.getters.specieMedia(this.record.taxonId);return!!t&&(console.log(this.record.commonNme,t,t.length),Object.prototype.hasOwnProperty.call(t[0],"small")?t[0].small.uri:!!Object.prototype.hasOwnProperty.call(t[0],"thumbnail")&&t[0].thumbnail.uri)},obs:function(){var t=this.record.taxonId;return this.$store.getters.records.reduce(function(e,n){return n.taxonId===t?e+1:e},0)},lastObs:function(){var t=this.record.taxonId,e=this.$store.getters.records.reduce(function(e,n){return n.taxonId===t&&e.push(n),e},[]);console.log(e);var n=e.sort(function(t,e){return e.surveyStartSdt-t.surveyStartSdt});return console.log("sorted",n),new Date(n[0].surveyStartSdt).getFullYear()}}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(30),o=n.n(r);e.default={components:{listItem:o.a},computed:{records:function(){var t=this.$store.state.selectedSpecie;return this.$store.getters.records.filter(function(e){return e.taxonId===t})}}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(30),o=n.n(r),i=n(139),s=n.n(i),c=n(141),a=n.n(c);e.default={components:{listItem:o.a,gridListItem:s.a,listFilter:a.a},computed:{items:function(){switch(this.$store.state.filter){case"species":return this.$store.getters.species;case"distance":return this.$store.getters.distance;case"count":return this.$store.getters.count;default:return this.$store.getters.records}}},methods:{selectSpecie:function(t){console.log(t),this.$store.dispatch("setSpecieDetail",t)}}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(140),o=n.n(r),i=n(142),s=n.n(i);e.default={components:{imgSlider:o.a,recordList:s.a},data:function(){return{specie:this.$store.getters.selectedSpecieData}},computed:{description:function(){return console.log(this.specie.generalDescription),this.specie.generalDescription}},methods:{close:function(){console.log("closing details page"),this.$store.dispatch("setSpecieDetail",null)}}}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},,function(t,e,n){n(136),n(135);var r=n(3)(n(79),n(153),"data-v-fe886be2",null);t.exports=r.exports},function(t,e,n){n(127);var r=n(3)(n(80),n(145),"data-v-1bef8c2c",null);t.exports=r.exports},function(t,e,n){n(130);var r=n(3)(n(81),n(148),"data-v-64cfdc61",null);t.exports=r.exports},function(t,e,n){n(132);var r=n(3)(n(82),n(150),null,null);t.exports=r.exports},function(t,e,n){n(131);var r=n(3)(n(84),n(149),"data-v-672b61fc",null);t.exports=r.exports},function(t,e,n){n(133);var r=n(3)(n(85),n(151),"data-v-d42173cc",null);t.exports=r.exports},function(t,e,n){n(128);var r=n(3)(n(86),n(146),"data-v-2c848f0a",null);t.exports=r.exports},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("md-whiteframe",{staticClass:"card",attrs:{"md-elevation":"1"}},[n("div",{staticClass:"card-content",style:t.backgroundImage},[n("p",{staticClass:"specie-name truncate"},[t._v(t._s(t.record.commonNme))])])])},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"container"}},[n("md-button",{nativeOn:{click:function(e){t.close(e)}}},[n("md-icon",[t._v("arrow_back")])],1),t._v(" "),n("h1",[t._v(t._s(t.specie.taxonomy.commonName))]),t._v(" "),n("h2",[t._v(t._s(t.specie.taxonomy.taxonName))]),t._v(" "),n("imgSlider"),t._v(" "),n("div",{staticClass:"description"},[n("h3",[t._v("Description :")]),t._v(" "),n("p",[t._v(t._s(t.description))])]),t._v(" "),n("h3",[t._v("Habitat :")]),t._v(" "),n("p",[t._v(t._s(t.specie.habitat))]),t._v(" "),n("h3",[t._v("Biology :")]),t._v(" "),n("p",[t._v(t._s(t.specie.biology))]),t._v(" "),n("h3",[t._v("Distribution :")]),t._v(" "),n("p",[t._v(t._s(t.specie.distribution))]),t._v(" "),n("h2",[t._v("Observation : ")]),t._v(" "),n("recordList")],1)},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("md-whiteframe",{staticClass:"main-toolbar",attrs:{"md-elevation":"1","md-theme":"primary"}},[n("md-toolbar",{staticClass:"main-toolbar"},[n("img",{attrs:{id:"logo",src:"https://www.wildlife.vic.gov.au/__data/assets/git_bridge/0015/177/deploy/mysource_files/logo-copy.svg",alt:"DELWP logo"}}),t._v(" "),n("md-layout",{staticClass:"toolbar-icons"},[this.$store.state.records.length?n("md-button",{staticClass:"md-icon-button",nativeOn:{click:function(e){t.switchView()}}},[this.$store.state.selectedSpecie?t._e():n("div",[t.listView?n("md-icon",[t._v("view_module")]):n("md-icon",[t._v("view_list")])],1)]):t._e(),t._v(" "),n("md-button",[n("md-icon",{attrs:{id:"menu-icon"}},[t._v("menu")])],1)],1)],1)],1),t._v(" "),this.$store.state.progress?n("md-progress",{staticClass:"md-accent",attrs:{"md-indeterminate":""}}):t._e(),t._v(" "),n("hello")],1)},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"images"},[n("md-button",{staticClass:"nav-button",nativeOn:{click:function(e){t.previous(e)}}},[n("md-icon",[t._v("navigate_before")])],1),t._v(" "),n("img",{attrs:{src:t.currentImage}}),t._v(" "),n("md-button",{staticClass:"nav-button",nativeOn:{click:function(e){t.next(e)}}},[n("md-icon",[t._v("navigate_next")])],1)],1)},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("md-list",{staticClass:"list"},t._l(t.records,function(e){return n("md-list-item",{staticClass:"md-list-item",attrs:{record:e}},[n("div",{staticClass:"md-list-text-container"},[n("span",[t._v("Observer : "+t._s(e.observerFullName))]),t._v(" "),n("span",[t._v("Method : "+t._s(e.samplingMethodCde))]),t._v(" "),n("span",[t._v("Date : "+t._s(new Date(e.surveyStartSdt).toDateString()))]),t._v(" "),e.totalCountInt?n("span",[t._v("Count : "+t._s(e.totalCountInt))]):t._e(),t._v(" "),n("span",[t._v("Accuracy: "+t._s(e.latLongAccuracyddNum)+" m")]),t._v(" "),n("span",[t._v("Project Id: "+t._s(e.projectId))])]),t._v(" "),n("md-divider",{staticClass:"md-inset"})],1)}))],1)},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("md-layout",{staticClass:"listFilter"},[n("md-layout",{attrs:{id:"itemType"}},[n("p",[t._v(t._s(t.itemType))])]),t._v(" "),n("md-layout",{attrs:{"md-align":"end"}},[n("div",{staticClass:"filterSelector"},[n("md-input-container",[n("label",{attrs:{for:"filter"}},[t._v("Sort by…")]),t._v(" "),n("md-select",{attrs:{name:"filter",id:"filter"},model:{value:t.filter,callback:function(e){t.filter=e},expression:"filter"}},[n("md-option",{attrs:{value:"records"}},[t._v("Records")]),t._v(" "),n("md-option",{attrs:{value:"species"}},[t._v("Species")]),t._v(" "),n("md-option",{attrs:{value:"distance"}},[t._v("Distance")]),t._v(" "),n("md-option",{attrs:{value:"count"}},[t._v("Count")])],1)],1)],1)])],1)},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("listFilter"),t._v(" "),this.$store.state.listView&&this.$store.getters.records.length?n("md-list",{staticClass:"list"},t._l(t.items,function(e){return n("listItem",{attrs:{record:e},nativeOn:{click:function(n){t.selectSpecie(e.taxonId)}}})})):n("md-layout",{staticClass:"card-layout"},t._l(t.items,function(t){return n("gridListItem",{attrs:{record:t}})}))],1)},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("md-list-item",{staticClass:"md-list-item"},[n("md-avatar",[t.thumbnail?n("img",{attrs:{src:t.thumbnail}}):n("img",{staticClass:"emoji",attrs:{src:"https://emojione.com/wp-content/uploads/assets/emojis/1f43e.svg",alt:"emoji"}})]),t._v(" "),n("div",{staticClass:"md-list-text-container"},[n("span",[t._v(t._s(t.record.commonNme))]),t._v(" "),n("span",[t._v(t._s(t.record.scientificDisplayNme))]),t._v(" "),n("div",{staticClass:"observation"},[n("p",[t._v(t._s(t.obs)+" Observation"+t._s(t.obs>1?"s":""))]),n("p"),n("p",[t._v("Last from "+t._s(t.lastObs))])])]),t._v(" "),n("md-divider",{staticClass:"md-inset"})],1)},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"hello"},[this.$store.state.records.length?t._e():n("div",{staticClass:"intro"},[n("h1",[t._v("Welcome to Bio scan")]),t._v(" "),t._m(0),t._v(" "),n("md-layout",{attrs:{"md-align":"center"}},[this.$store.state.token?n("md-button",{staticClass:"md-raised",attrs:{disabled:!1,id:"browse-button"},nativeOn:{click:function(e){t.browse(e)}}},[n("md-icon",[t._v("place")]),t._v("  \n        Browse\n      ")],1):t._e()],1)],1),t._v(" "),n("transition",{attrs:{name:"component-fade",mode:"out-in"}},[n(t.currentComponent,{tag:"component"})],1)],1)},staticRenderFns:[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("p",[t._v("Explore the recorded species nearby.\n    You can set the size of the search area and download the results.\n    Records are provided by the "),n("a",{attrs:{href:"https://vba.dse.vic.gov.au/vba/"}},[t._v("Victorian Biodiversity Atlas")])])}]}},,,,function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(12),o=n(54),i=n.n(o),s=n(52),c=(n.n(s),n(53)),a=n.n(c),u=n(51);r.default.config.productionTip=!1,r.default.use(i.a),r.default.material.registerTheme("default",{primary:{color:"purple",hue:900},accent:{color:"teal",hue:"A700"},warn:"red",background:{color:"grey",hue:300}}),r.default.material.setCurrentTheme("default"),new r.default({el:"#app",store:u.a,template:"<App/>",components:{App:a.a}})}]),[157]);
//# sourceMappingURL=app.5df5430278e5f81301ea.js.map